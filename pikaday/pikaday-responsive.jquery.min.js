!function($){$.fn.pikaday=function(options){var settings=$.extend({},$.fn.pikaday.defaults,options);return this.each(function(){var elem,input,container,self,picker,isPikaday;if(elem=$(this),self=this,this.clearDate=function(){$(this).parent(".pikaday-container").children("input").each(function(){$(this).val("").trigger("change")})},this.gotoToday=function(){isPikaday?($(this).siblings(".pikaday-display").val(moment().format(settings.displayFormat)).trigger("change"),picker.gotoToday()):$(this).siblings(".pikaday-invisible").val(moment().format("YYYY-MM-DD")).trigger("change")},"INPUT"!==elem.prop("tagName"))return console.error("Pikaday can only be intitialized on input-fields! Tried to initialized on: "),void console.error(elem);if(elem.attr("type","hidden"),elem.wrap("<span class='pikaday-container'></span>"),container=elem.parent(".pikaday-container"),!settings.forcePikaday&&settings.hasTouch&&settings.hasNativeDate){isPikaday=!1;var display=$("<input type='text' readonly class='pikaday-display pikaday-display-native "+settings.classes+"' placeholder='"+settings.placeholder+"' />");container.append(display),input=$("<input type='date' class='pikaday-invisible' />"),container.append(input),input.change(function(){if(""===$(this).val())return display.removeClass(""),elem.val(""),input.val(""),display.val(""),elem.val(""),void elem.trigger("change");var val,date=moment($(this).val(),"YYYY-MM-DD");!date.isValid()||date.unix()<0?(display.addClass("is-invalid"),input.val(""),display.val(""),elem.val("")):(display.removeClass("is-invalid"),display.val(date.format(settings.displayFormat)),val="unix"===settings.outputFormat?date.unix():"input"===settings.outputFormat?$(this).val():date.format(settings.outputFormat),elem.val(val)),elem.trigger("change")})}else isPikaday=!0,input=$("<input type='text' class='pikaday-display "+settings.classes+"' placeholder='"+settings.placeholder+"' />"),container.append(input),picker=new Pikaday($.extend({},settings.pikadayOptions,{field:$(input)[0],format:settings.displayFormat})),input.change(function(){if(""===$(this).val())return input.removeClass("is-invalid"),elem.val(""),input.val(""),elem.val(""),void elem.trigger("change");var val,date=moment($(this).val(),settings.displayFormat);!date.isValid()||date.unix()<0?(input.addClass("is-invalid"),picker.gotoToday(),input.val(""),elem.val("")):(input.removeClass("is-invalid"),val="unix"===settings.outputFormat?date.unix():"input"===settings.outputFormat?$(this).val():date.format(settings.outputFormat),elem.val(val)),elem.trigger("change")});if(settings.showClearButton){var clearBtn=$("<button class='pikaday-clear-btn'></button");clearBtn.html(settings.clearButtonText),container.append(clearBtn),clearBtn.click(function(){self.clearDate()})}if(settings.showTodayButton){var todayBtn=$("<button class='pikaday-today-btn' ></button");todayBtn.html(settings.todayButtonText),container.append(todayBtn),todayBtn.click(function(){self.gotoToday()})}})},$.fn.pikaday.defaults={displayFormat:"DD.MM.YYYY",outputFormat:"unix",hasTouch:Modernizr.touch,hasNativeDate:Modernizr.inputtypes.date,forcePikaday:!1,placeholder:"",classes:"",pikadayOptions:{},showTodayButton:!1,showClearButton:!1,todayButtonText:"Today",clearButtonText:"Clear"}}(jQuery);